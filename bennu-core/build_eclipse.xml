<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="post-process" name="Compilation Target Buildfile">
    <property file="build.properties" />

    <property name="build.home" location="${build.prefix}bennu" />

    <!-- Directories for deploy -->
    <path id="class.path.ref">
        <fileset dir="lib">
            <include name="*.jar" />
        </fileset>
        <fileset dir="${build.home}/WEB-INF/lib">
            <include name="*.jar" />
        </fileset>
    </path>

    <target name="post-process" description="Processes the code">
        <java classname="pt.ist.fenixWebFramework.services.ServiceAnnotationInjector"
              failonerror="true">
        	<classpath>
        		<path refid="class.path.ref" />
                <pathelement path="${build.home}/WEB-INF/classes" />
        	</classpath>
            <arg value="${build.home}/WEB-INF/classes" />
            <arg value="${build.home}/WEB-INF/lib/jvstm.jar" />
            <arg value="${build.home}/WEB-INF/lib/fenix-framework-remote-plugin.jar" />
            <arg value="${build.home}/WEB-INF/lib/fenix-framework-core*.jar" />
            <arg value="${build.home}/WEB-INF/lib/fenix-web-framework-r*.jar" />
            <arg value="${build.home}/WEB-INF/lib/joda-time-1.5.2.jar" />
            <arg value="${build.home}/WEB-INF/lib/fenix-tools.jar" />
            <arg value="${build.home}/WEB-INF/lib/vaadin-*.jar" />
        </java>
        <java classname="pt.ist.fenixframework.pstm.PostProcessDomainClasses"
              dir="${build.home}/WEB-INF/classes"
              fork="true">
        	<classpath>
        		<path refid="class.path.ref" />
                <pathelement path="${build.home}/WEB-INF/classes" />
        	</classpath>
            <arg value="-d" />
            <arg value="${build.home}/WEB-INF/classes" />
        </java>
    </target>
    </project>
